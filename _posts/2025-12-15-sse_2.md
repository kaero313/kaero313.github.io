---
title: "[SSE-2] 실시간 알림 서비스 구현해보기 feat. AOP"
date: 2025-12-17 15:41:10 +0900
categories: [Web, Server]
tags: [웹, 서버]
---

실시간 알림 서비스를 구현하기 위하여 세팅된 프로젝트 환경은 이와 같다.
- Spring Boot
- Spring Security
- Java21
- Mybatis

# 1. SSE 개발
---

## 디렉토리 구성

우선 현재 프로젝트 환경에 맞춰서 디렉토리를 구성했다.
```tree
sse-project/
├── java/
│   ├── config/
│   │   └── SecurityConfig.java # 스프링 시큐리티 설정 파일
│   ├── sse/
│   │   ├── SseController.java # 컨트롤러
│   │   └── SseService.java # 서비스
│   ├── noti/
│   │   ├── Notification.java # 알림 DTO
│   │   ├── NotifyChange.java # 커스텀 어노테이션
│   │   └── NotifyChangeAspect.java # AOP
│   │
│   webapp/
│   ├── views/
│   │   └── sse.html # 알림 수신 페이지
│   ├── js/
│   │   └── sse.js # 연결 스크립트
└ pom.xml # Maven 관리
```
> 실제 프로젝트와 동일한 구성은 아니고 대략적으로 필요한 파일만 간추렸다.

## security 설정

기본적으로 스프링 시큐리티는 애플리케이션으로 들어오는 모든 종류의 요청을 감지하기 때문에,<br/>
sse api를 만들기 위해서는 해당 요청에 대한 권한 처리를 하는 설정이 필요했다.<br/>

<div align="left">
  <img src="assets/img/sse/security_config.png" alt="시큐리티 설정" width="800">
</div>

- 테스트를 위해 기본적인 설정들은 비활성화하고, api 요청은 허용하도록 설정했다.

## 컨트롤러 & 서비스

- 컨트롤러
<div align="left" style="display:flex;">
  <img src="assets/img/sse/SseController1.png" alt="컨트롤러1" width="500">
  <img src="assets/img/sse/SseController2.png" alt="컨트롤러2" width="500">
  <img src="assets/img/sse/SseController3.png" alt="컨트롤러3" width="500">
</div>
> 클라이언트는 로그인 시 /api/sse/stream 으로 요청하여 연결을 해놔야한다.

- 서비스
<div align="left" style="display:flex;">
  <img src="assets/img/sse/SseService1.png" alt="서비스1" width="500">
</div>
