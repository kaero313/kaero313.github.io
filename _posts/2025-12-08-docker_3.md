---
title: "[도커-3] 도커 이미지 관리: 도커 허브 사용법부터 도커 파일 최적화까지"
date: 2025-12-08 09:13:27 +0900
categories: [Infra, Docker]
tags: [도커, 인프라, 서버]
---

<div align="center">
  <img src="assets/img/docker/icon_hub.png" alt="도커 허브 아이콘" width="400">
</div>

도커 허브란 도커 이미지를 저장하고 공유하는 클라우드 저장소이다.<br/> 
이 글을 포스팅하는 Github랑 비슷한 서비스라고 생각하면 된다.<br/>
도커 이미지 저장소는 Public과 Private로 나누어져 있으며 여러 클라우드 서비스 업체들이 따로 운영도 하고 있지만,<br/>
여기서는 Public이자 공식 저장소인 도커 허브만 다루도록 하겠다.<br/>

<br/>

# 도커 허브
---

도커 허브를 이용하려면 일단 회원가입부터 진행해야 한다.<br/>
하단 링크를 접속하여 우측 상단의 Sign up 버튼을 눌러 회원가입을 진행하자.<br/>
- [도커 허브 공식 사이트](https://hub.docker.com/)

다음은 무료 플랜의 경우 제공되는 기능이다.<br/>
- Public 저장소 무제한
- Private 저장소 1개
- 자동 빌드 기능

<div align="left">
  <img src="assets/img/docker/docker_login.png" alt="도커 로그인" width="500">
</div>

> 이미 nayatrei가 있어서 nayatrei3으로 가입했다...

docker login -u [username] 명령어를 입력한 후 비밀번호를 입력하면 로그인이 성공되었다는 메세지가 출력된다.<br/>
깃허브 계정으로 가입하면 비밀번호 대신 토큰을 발급받아서 사용해야 한다.<br/>

## 이미지 태그

도커 허브 이용시 이미지 태그의 표준 구조에 맞춰야 사용하기에 좋다.<br/>

```tree
[레지스트리]/[네임스페이스]/[레포지토리]:[태그]
예시:
docker.io/nayatrei/nayatrei-app:v1.0
│         │        │            └── 태그 (버전)
│         │        └─────────────── 레포지토리
│         └──────────────────────── 네임스페이스
└────────────────────────────────── 레지스트리
```

| 구성 요소 | 필수/선택 | 값 | 설명 |
| :--- | :--- | :--- | :--- |
| 레지스트리 | 선택 | 서버의 주소 | 생략 시 자동으로 docker.io로 지정됨 |
| 네임스페이스  | **대부분 필수** | 개인/조직명 | 공식 이미지를 pull시엔 생략<br/>개인 이미지를 push/pull시엔 필수 |
| 레포지토리 | **필수** | 이미지명 | 이미지의 주요 식별자 |
| 태그 | **선택적이지만 권장** | 버전명 | 태그를 생략하면 latest 태그가 자동으로 부여됨<br/>하지만 명시하는 것이 버전 관리에 용이하므로 사용이 권장됨 |

### 태그 생성 방법

docker tag 로컬이미지명 username/업로드이미지명:버전<br/>
- 예시) docker tag docker-web-server:1.0 nayatrei3/nayatrei-app:v1.0

## 이미지 업로드

<div align="left">
  <img src="assets/img/docker/docker_push.png" alt="도커 허브 푸시" width="500">
</div>

### 각 구문별 해석
- `docker tag docker-web-server:1.0 nayatrei3/nayatrei-app:v1.0`
  - 로컬 저장소 이미지의 docker-web-server:1.0를 nayatrei3/nayatrei-app:v1.0 태그로 생성한다.
- `docker push nayatrei3/nayatrei-app:v1.0`
  - 나의 도커 허브 공개저장소로 이미지를 올린다.

<div align="left" style="display:flex;">
  <img src="assets/img/docker/hub_repositories.png" alt="허브 웹 레포지토리" width="500">
  <img src="assets/img/docker/hub_repositories2.png" alt="허브 웹 레포지토리2" width="500">
  <img src="assets/img/docker/hub_repositories3.png" alt="허브 웹 레포지토리3" width="500">
</div>
> 방금 올린 이미지를 웹 도커 허브 레포지토리에서 확인할 수 있다.

## 이미지 다운로드

<div align="left" style="display:flex;">>
  <img src="assets/img/docker/docker_pull.png" alt="도커 허브 풀" width="500">
  <img src="assets/img/docker/pull_result.png" alt="도커 허브 풀 결과" width="500">
</div>
> 기존 이미지를 삭제하고 레포지토리에서 pull 후 실행한 결과. 기존과 똑같은 상태인것을 확인할 수 있다.

### 각 구문별 해석
- `docker pull nayatrei3/nayatrei-app:v1.0`
  - 도커 허브 공개 저장소 nayatrei3에서 nayatrei-app:v1.0 이미지를 다운 받는다.
- `docker run -d -p 80:80 nayatrei3/nayatrei-app:v1.0`
  - nayatrei3/nayatrei-app:v1.0 이미지를 백그라운드에서 실행하여 컨테이너를 만든다. 
  - 호스트 컴퓨터의 80번 포트를 컨테이너 내부의 80번 포트와 연결한다.

### 이미지 검색 방법

이미 만들어진 이미지가 그렇게 많다는데 그 정보를 어디서 얻어야 할까?<br/>
이미지 검색 방법에는 크게 두 가지가 있다.

#### 도커 허브 웹사이트

첫 번째는 공식 도커 허브 웹사이트를 이용하는 방법이다.
- [도커 허브 저장소](https://hub.docker.com/explore)

이미지의 종류가 많고 다양한데 관리 주체별로 분류해보자면 세 종류로 분류할 수 있다. 

| 종류 | 관리 주체 | 신뢰도 | 확인 방법 및 특징 | 예시 (저장소 이름) |
| :--- | :--- | :--- | :--- | :--- |
| 공식 이미지 | 도커 팀 또는 신뢰 파트너 | **최상** | Official 배지 확인. 가장 안전하고 검증된 베이스 이미지. | `nginx`, `redis`, `python` |
| 검증된 게시자 | 도커 파트너십 상업용 공급업체 | **높음** | Verified Publisher 배지 확인. 해당 업체의 공식 지원. | `mongodb/mongodb`, `amazon/aws-cli` |
| 일반 사용자/커뮤니티 | 일반 도커 사용자 | **사용자 판단 필요** | 특별한 배지 없음. 이름에 슬래시( / )와 사용자 ID가 포함됨. | `myusername/mywebserver`, `jbookes/centos7.8` |

#### 터미널 명령어 이용

두 번째는 터미널에서 명령어를 이용하는 방법이다.

<div align="left">
  <img src="assets/img/docker/docker_search.png" alt="도커 이미지 검색" width="500">
</div>
> 공식 이미지 뿐만 아니라, 내가 올린 이미지도 검색이 된다.

- 공식/파트너십 이미지 검색 방법
  - docker search [이미지명]
  - 예시) docker search nginx
- 일반 사용자/커뮤니티 이미지 검색 방법
  - docker search [사용자ID/이미지명]
  - 예시) docker search nayatrei3/nayatrei-app
  